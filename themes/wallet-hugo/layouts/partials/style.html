<!--Favicon-->
<link rel="shortcut icon" href="{{ site.Params.favicon | absURL }}" type="image/x-icon">
<link rel="icon" href="{{ site.Params.favicon | absURL }}" type="image/x-icon">

<!-- Connection hints -->
<meta http-equiv="x-dns-prefetch-control" content="on">
<link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
<link rel="preconnect" href="https://unpkg.com" crossorigin>
<link rel="dns-prefetch" href="https://fonts.googleapis.com">
<link rel="dns-prefetch" href="https://fonts.gstatic.com">
<link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
<link rel="dns-prefetch" href="https://unpkg.com">

{{ $primaryFont := site.Params.variables.primary_font | default "Rubik:wght@400;500;700" }}
{{ $secondaryFont := site.Params.variables.secondary_font }}
{{ $fontFamilies := slice }}
{{ with $primaryFont }}{{ $fontFamilies = $fontFamilies | append (replace . " " "+") }}{{ end }}
{{ with $secondaryFont }}{{ if . }}{{ $fontFamilies = $fontFamilies | append (replace . " " "+") }}{{ end }}{{ end }}
{{ if gt (len $fontFamilies) 0 }}
  {{ $googleFontsURL := "https://fonts.googleapis.com/css2" }}
  {{ range $index, $family := $fontFamilies }}
    {{ if eq $index 0 }}
      {{ $googleFontsURL = printf "%s?family=%s" $googleFontsURL $family }}
    {{ else }}
      {{ $googleFontsURL = printf "%s&family=%s" $googleFontsURL $family }}
    {{ end }}
  {{ end }}
  {{ $googleFontsURL = printf "%s&display=swap" $googleFontsURL }}
  {{ $.Scratch.Set "googleFontsURL" $googleFontsURL }}
  <link rel="preload" as="style" href="{{ $googleFontsURL }}" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="{{ $googleFontsURL }}" crossorigin="anonymous"></noscript>
{{ end }}
<!-- AOS CSS loaded asynchronously to prevent render blocking -->
<link rel="preload" href="https://unpkg.com/aos@next/dist/aos.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" /></noscript>
<!-- plugins + stylesheet -->
{{ $styles := slice }}
{{ range site.Params.plugins.css }}
{{ if findRE "^http" .link }}
<link crossorigin="anonymous" media="all" rel="stylesheet" href="{{ .link | absURL }}" {{.attributes | safeHTMLAttr}} >
{{ else }}
{{ $styles = $styles | append (resources.Get .link) }}
{{ end }}
{{ end }}
{{ $styles := $styles | append (resources.Get "scss/style.scss" | resources.ExecuteAsTemplate "style.scss" . | toCSS) }}
{{ $styles := $styles | resources.Concat "/css/style.css" | minify  | fingerprint "sha512"}}
<style crossorigin="anonymous" media="all" type="text/css" integrity="{{ $styles.Data.Integrity }}">{{$styles.Content | safeCSS}}</style>